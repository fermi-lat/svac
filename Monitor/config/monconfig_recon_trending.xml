<monitoring>

  <inputList name="top"> 

    
    <!-- Time stamp -->
    <object> timestampdouble </object>
     <!-- Event classification information -->
    <object> condsummary </object>


      <!-- Tkr Variables -->
    <object> ReconNumTracks</object>
    <object> ReconVertexPosXYZ </object>
    <object> ReconDirXYZ </object>

    <!-- Cal Variables -->
    
    <object> ReconEnergy_TowerCalLayerCalColumn </object>
    <object> CalXtalFaceSignal </object>
  </inputList>


  <outputList name="top">

    <!-- Trigger/counters -->

     <object>
      <name> CondsummaryBitAnd30_NOTPeriodic </name>
      <formula><![CDATA[ 1 ]]></formula>
      <cut><![CDATA[condsummary&30 && !(condsummary&32)]]></cut>
      <type> counter </type>
      <description> Counter of events with condsummaryBitAnd30 AND NotcondsummaryBitAnd32) </description>
    </object>

    


     <!-- Tkr Variables -->


     <object>
      <name> ReconNumTracks[11] </name>
      <formula><![CDATA[ReconNumTracks]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> rate </type>
      <description> Vector[11] reporting the rate of events with n tracks [0,10]. Periodic triggers are NOT taken into account. </description>
    </object>


     <object>
      <name> ReconTracks </name>
      <formula><![CDATA[RFun::returnnonzerocomponent(ReconNumTracks,11)]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32) && (RFun::returnnonzerocomponent(ReconNumTracks,11) >= 0)]]></cut>
      <type> mean </type>
      <description> Mean number of reconstructed tracks. Periodic triggers are NOT taken into account. </description>
    </object>

     <object>
      <name> ReconVertexDir_XYZ[3] </name>
      <formula><![CDATA[ReconDirXYZ]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> mean </type>
      <description> Vector[3] reporting the MEAN reconstructed Vertex direction X, Y and Z. Periodic triggers are NOT taken into account. </description>
    </object>


     <object>
      <name> ReconVertexPos_XYZ[3] </name>
      <formula><![CDATA[ReconVertexPosXYZ]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32) && ReconVertexPosXYZ[0]<1000000]]></cut>
      <type> mean </type>
      <description> Vector[3] reporting the MEAN reconstructed Vertex position X, Y and Z. Periodic triggers are NOT taken into account. Only events with TkrVertex objects are being considered. </description>
    </object>



      <!-- Cal Variables -->


    <object>
      <name> ReconEnergy </name>
      <formula><![CDATA[RFun::loopovertowerANDcallayersANDcalcolumns_float(ReconEnergy_TowerCalLayerCalColumn)]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> truncatedmean[1.0,10000000] </type>
      <description> Mean measured energy (MeV) in the calorimeter per event. All towers and layers taken into account. Periodic triggers are NOT taken into account. </description>
    </object>

    <object>
      <name> ReconEnergy_Tower[16] </name>
      <formula><![CDATA[foreachtower: RFun::loopovercallayersANDcalcolumns_float(ReconEnergy_TowerCalLayerCalColumn[tower])]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> truncatedmean[1.0,10000000] </type>
      <description> Vector [tower] reporting the mean measured energy (MeV) per event in the calorimeter of tower.  Periodic triggers are NOT taken into account. If the calorimeter of this tower was totally empty (for that event), the value is not taken into account in the average procedure.</description>
    </object>

    <object>
      <name> ReconEnergy_TowerCalLayer[16][8] </name>
      <formula><![CDATA[foreachtower: foreachcallayer:  RFun::loopovercalcolumns_float(ReconEnergy_TowerCalLayerCalColumn[tower][callayer])]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> truncatedmean[1.0,10000000] </type>
      <description> Vector [tower][callayer] reporting the mean energy (MeV) in the calorimeter layer defined by tower,callayer. Periodic triggers are NOT taken into account. If the layer was totally empty, the value is not taken into account in the average procedure.</description>
    </object>

      <object>
      <name> ReconEnergy_TowerCalLayerCalColumn[16][8][12] </name>
      <formula><![CDATA[foreachtower: foreachcallayer: foreachcalcolumn: ReconEnergy_TowerCalLayerCalColumn[tower][callayer][calcolumn] ]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> truncatedmean[1.0,10000000]  </type>
      <description> Vector [tower][callayer][calcolumn] containing the Mean energy (MeV) in the calorimeter crystal log defined by tower,callayer,calcolumn. Periodic triggers are NOT taken into account. If the crystal was totally empty (not used), the value is not taken into account in the average procedure.</description>
    </object>


      <object>
      <name> RecEnergy_TowerCalLayerCalColumnCalXFace[16][8][12][2] </name>
      <formula><![CDATA[foreachtower: foreachcallayer: foreachcalcolumn: foreachcalxface: CalXtalFaceSignal[tower][callayer][calcolumn][calxface]]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> truncatedmean[1.0,10000000]  </type>
      <description> Vector [tower][callayer][calcolumn][calxface] containing the Mean energy (MeV) in the calorimeter crystal diode defined by tower,callayer,calcolumn, calxface. Periodic triggers are NOT taken into account. If the diode was not used, the value is not taken into account in the average procedure.</description>
    </object>


      
      <object>
      <name> ReconZeroEnergy_TowerCalLayer[16][8] </name>
      <formula><![CDATA[foreachtower: foreachcallayer: RFun::loopovercalcolumns_float(ReconEnergy_TowerCalLayerCalColumn[tower][callayer]) <=0]]></formula>
      <cut><![CDATA[ condsummary&30 && !(condsummary&32)]]></cut>
      <type> counter </type>
      <description> Vector [tower][callayer] containing the number of times the calorimeter layer defined by tower,callayer is empty. Periodic triggers are NOT taken into account.</description>
    </object>


      <object>
      <name> ReconZeroEnergy_Fraction_TowerCalLayer[16][8] </name>
      <formula><![CDATA[foreachtower: foreachcallayer: Counter_CondsummaryBitAnd30_NOTPeriodic > 0 ? Counter_ReconZeroEnergy_TowerCalLayer[tower][callayer]/double(Counter_CondsummaryBitAnd30_NOTPeriodic) : 0.0]]></formula>
      <cut><![CDATA[]]></cut>
      <source>output</source>
      <type> outputfloat </type>
      <description> Vector [tower][callayer] containing the fraction of events with ZERO energy (as well as events whose energy in [tower][callayer] could not be reconstructed) in the calorimeter layer defined by tower,callayer. Periodic triggers are NOT taken into account.</description>
    </object>

        <object>
      <name> ReconZeroEnergy_Fraction_TowerCalLayer_err[16][8] </name>
      <formula><![CDATA[foreachtower: foreachcallayer: (Counter_CondsummaryBitAnd30_NOTPeriodic>0 && Counter_ReconZeroEnergy_TowerCalLayer[tower][callayer]>0) ? ((Counter_ReconZeroEnergy_TowerCalLayer[tower][callayer]/double(Counter_CondsummaryBitAnd30_NOTPeriodic))*TMath::Sqrt(1./double(Counter_ReconZeroEnergy_TowerCalLayer[tower][callayer]) + 1./double(Counter_CondsummaryBitAnd30_NOTPeriodic)) ) : 0.0]]></formula>
      <cut><![CDATA[]]></cut>
      <source>output</source>
      <type> outputfloat </type>
      <description> Error in quantity ReconZeroEnergy_Fraction_TowerCalLayer.</description>
    </object>


  </outputList>

  <eventCut><![CDATA[ ]]></eventCut>
  <timestamp> timestampdouble  </timestamp>
</monitoring>
