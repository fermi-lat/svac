
Installing a new version of the SVAC pipeline
---------------------------------------------

Turn off the pipeline ( 
  cd /nfs/slac/g/svac/common/pipeline/Integration/onlinePipeline/log
  echo Manual disable by `whoami` at `date` > running
  chmod g+w running 
).
Check for the existence of the 'running' file first, if it is there, wait until it
isn't (should only take a couple of minutes).

Make sure that svacVersion in setup/svacPlSetup.cshrc is the same as the tag
you will be using <tag>.

If you are changing disks, Jim Panetta will have to change the online task at
the same time.  Also, you need to go to
/afs/slac/www/exp/glast/ground/LATSoft/nfsLinks and make a symbolic link to
the new disk.

if Jim has changed his task, you will need to update onlineTaskVersion in
svacPlSetup.cshrc

Tag it <tag>.

Check out the code (svac/svacPipeline in /nfs/slac/g/glast/ground/cvs).

Copy svacPipeline directory to
/nfs/slac/g/svac/common/pipeline/Integration/svacPipeline/<tag>.

setenv svacPlRoot /nfs/slac/g/svac/common/pipeline/Integration/svacPipeline/<tag>

Run $svacPlRoot/*/genXml.pl.  This will create several XML files with names
like task-version.xml.

Upload the XML files created in the previous step with web front end at
http://glast-ground.slac.stanford.edu/

Wait for the pipeline to empty.  Use the web front end to see that all runs
for all current tasks are done.  This could take hours.

Edit ~glast/.cshrc, changing svacPlRoot to point to the new location.  Warren,
Dan, Matt, Richard, Jim, or Tony can do this for you if you can't.

Replace the symbolic link
/nfs/slac/g/svac/common/pipeline/Integration/svacPipeline/SVACWrapper.pl with
one that points at
/nfs/slac/g/svac/common/pipeline/Integration/svacPipeline/<tag>/online/SVACWrapper.pl
(this is so online can launch our task without having to change their code).

Turn the pipeline back on 
(rm /nfs/slac/g/svac/common/pipeline/Integration/onlinePipeline/log/running).
